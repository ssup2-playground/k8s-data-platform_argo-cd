apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: mediawiki-kafka-ingester
  namespace: data-platform
  labels:
    app.kubernetes.io/component: networkpolicy
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: mediawiki-kafka-ingester
  policyTypes:
  - Ingress
  - Egress
  ingress: []  # No ingress traffic allowed
  egress:
  - to: []  # Allow all egress for external APIs and Kafka
    ports:
    - protocol: TCP
      port: 443  # HTTPS for external APIs
    - protocol: TCP
      port: 9092  # Kafka
    - protocol: TCP
      port: 53  # DNS
    - protocol: UDP
      port: 53  # DNS
